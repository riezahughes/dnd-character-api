# Migration `20201020133951-init`

This migration has been generated by Dan at 10/20/2020, 2:39:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Character" ADD COLUMN "alignment" text   NOT NULL ,
ADD COLUMN "experience" integer   NOT NULL ,
ADD COLUMN "background" text   NOT NULL ,
ADD COLUMN "personality" text   NOT NULL ,
ADD COLUMN "ideals" text   NOT NULL ,
ADD COLUMN "bonds" text   NOT NULL ,
ADD COLUMN "flaw" text   NOT NULL ,
ADD COLUMN "hp" integer   NOT NULL ,
ADD COLUMN "temphp" integer   NOT NULL ,
ADD COLUMN "maxhp" integer   NOT NULL ,
ADD COLUMN "strength" integer   NOT NULL ,
ADD COLUMN "dexterity" integer   NOT NULL ,
ADD COLUMN "intelligence" integer   NOT NULL ,
ADD COLUMN "wisdom" integer   NOT NULL ,
ADD COLUMN "charisma" integer   NOT NULL ,
ADD COLUMN "age" integer   NOT NULL ,
ADD COLUMN "size" text   NOT NULL ,
ADD COLUMN "height" text   NOT NULL ,
ADD COLUMN "weight" text   NOT NULL ,
ADD COLUMN "eyes" text   NOT NULL ,
ADD COLUMN "skin" text   NOT NULL ,
ADD COLUMN "hair" text   NOT NULL ,
ADD COLUMN "appearance" text   NOT NULL ,
ADD COLUMN "allies_org" text   NOT NULL ,
ADD COLUMN "backstory" text   NOT NULL ,
ADD COLUMN "treasure" text   NOT NULL 

ALTER TABLE "public"."Class" ADD COLUMN "hitdice" text   ,
ADD COLUMN "hpfirstlevel" integer   ,
ADD COLUMN "hpperlevel" integer   ,
ADD COLUMN "hpperlevel_roll" integer   

CREATE TABLE "public"."CharacterEquipment" (
"id" SERIAL,
"characterId" integer   NOT NULL ,
"equipmentId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."CharacterSkills" (
"id" SERIAL,
"characterId" integer   NOT NULL ,
"skillId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."CharacterSpells" (
"id" SERIAL,
"characterId" integer   NOT NULL ,
"spellId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Equipment" (
"id" SERIAL,
"name" text   ,
"type" text   ,
"description" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."DiceModifier" (
"id" SERIAL,
"name" text   ,
"scope" text   ,
"diceSides" integer   ,
"rollType" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Skill" (
"id" SERIAL,
"name" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Spell" (
"id" SERIAL,
"name" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Deity" (
"id" SERIAL,
"name" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Proficiency" (
"id" SERIAL,
"name" text   ,
"classId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Trait" (
"id" SERIAL,
"name" text   ,
"description" text   ,
"level" integer   NOT NULL ,
"classId" integer   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."CharacterEquipment" ADD FOREIGN KEY ("characterId")REFERENCES "public"."Character"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."CharacterEquipment" ADD FOREIGN KEY ("equipmentId")REFERENCES "public"."Equipment"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."CharacterSkills" ADD FOREIGN KEY ("characterId")REFERENCES "public"."Character"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."CharacterSkills" ADD FOREIGN KEY ("skillId")REFERENCES "public"."Skill"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."CharacterSpells" ADD FOREIGN KEY ("characterId")REFERENCES "public"."Character"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."CharacterSpells" ADD FOREIGN KEY ("spellId")REFERENCES "public"."Spell"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Proficiency" ADD FOREIGN KEY ("classId")REFERENCES "public"."Class"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Trait" ADD FOREIGN KEY ("classId")REFERENCES "public"."Class"("id") ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE "public"."Items"

DROP TABLE "public"."Weapons"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201020112730-init..20201020133951-init
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,30 +17,114 @@
   race  Race  @relation(fields: [raceId], references: [id])
   raceId Int
   class Class @relation(fields: [classId], references: [id])
   classId Int
+  alignment String
+  experience Int
+  background String
+  personality String
+  ideals String
+  bonds String
+  flaw String
+  hp Int
+  temphp Int
+  maxhp Int
+  strength Int
+  dexterity Int
+  intelligence Int
+  wisdom Int
+  charisma Int
+  age Int
+  size String
+  height String
+  weight String
+  eyes String
+  skin String
+  hair String
+  appearance String
+  allies_org String
+  backstory String
+  treasure String
+  equipment CharacterEquipment[]
 }
+model CharacterEquipment{
+  id Int @default(autoincrement()) @id
+  character Character
+  item Equipment
+}
+
+model CharacterSkills{
+  id Int @default(autoincrement()) @id
+  character Character
+  skill Skill
+}
+
+model CharacterSpells{
+  id Int @default(autoincrement()) @id
+  character Character
+  spell Spell
+}
+
+model Equipment{
+  id  Int @default(autoincrement()) @id
+  name String?
+  type String?
+  description String?
+}
+
+model DiceModifier{
+  id  Int @default(autoincrement()) @id  
+  name String?
+  scope String?
+  diceSides Int?
+  rollType String?
+}
+
 model Race{
   id  Int @default(autoincrement()) @id
   name  String?
 }
 model Class{
   id  Int @default(autoincrement()) @id
   name String?
+  hitdice String?
+  hpfirstlevel Int?
+  hpperlevel Int?
+  hpperlevel_roll Int?
+  proficiencies Proficiency[]
+  traits Trait[]
 }
+model Skill{
+  id  Int @default(autoincrement()) @id
+  name String?
+}
+
+model Spell{
+  id  Int @default(autoincrement()) @id
+  name String?
+}
+
 model SubClass{
   id  Int @default(autoincrement()) @id
   name String?
 }
-model Weapons{
+model Deity{
   id  Int @default(autoincrement()) @id
   name String?
 }
-model Items{
+model Proficiency{
   id  Int @default(autoincrement()) @id
   name String?
-}
+}
+
+model Trait{
+  id  Int @default(autoincrement()) @id
+  name String?
+  description String?
+  class Class?
+  level Int
+}
```


